# Command ‘ps’, ‘top’, ‘htop’

## 1. ps

tham khảo tại [tecmint](https://www.tecmint.com/ps-command-examples-for-linux-process-monitoring/)

tham khảo tại [vietnix.vn](https://vietnix.vn/lenh-ps-trong-linux/)

Lệnh ps được dùng để xem thông tin về các tiến trình đang chạy trên hệ thống. Lệnh này đọc thông tin từ các tệp ảo trong hệ thống tệp /proc

### Các option của lệnh `ps`

#### 1. Chạy ps mặc định

- nó sẽ hiển thị các tiến trình cho shell hiện tại 

#### 2. Liệt kê tất cả các tiến trình trong hệ thống 

- `-A` hoặc `-e`
- Để in process tree dùng `-eH` hoặc `-e --forest`

#### 3. `ps au`, `ps -axu` hiển thị tiến trình theo định dạng BSD

#### Sự khác nhau giữa `ps au` và `ps axu`

- **`ps au`**: Chỉ hiển thị các tiến trình có kết nối với một terminal (TTY) của tất cả người dùng.
- **`ps axu`**: Hiển thị tất cả các tiến trình của tất cả người dùng, bao gồm cả những tiến trình không có kết nối với một terminal (TTY).

tóm lại
ps au : sẽ liệt kê danh sách các tiến trình có tty

ps axu: liệt kê tất cả các tiến trình có, và không có tty

TTY là gì? 

Lệnh này sẽ trả về một bảng bao gồm các cột như sau:

- **USER**: Tên người dùng sở hữu tiến trình.
- **PID**: ID của tiến trình.
- **%CPU**: Phần trăm CPU mà tiến trình sử dụng.
- **%MEM**: Phần trăm bộ nhớ RAM mà tiến trình sử dụng.
- **VSZ**: Kích thước bộ nhớ ảo của tiến trình.
- **RSS**: Kích thước bộ nhớ thực của tiến trình.
- **TTY**: Terminal được liên kết với tiến trình (hoặc '?' nếu không có terminal).
- **STAT**: Trạng thái của tiến trình (R = running, S = sleeping, T = stopped, Z = zombie).
- **START**: Thời gian khởi động của tiến trình.
- **TIME**: Tổng thời gian CPU mà tiến trình đã sử dụng.
- **COMMAND**: Lệnh hoặc chương trình được chạy để khởi tạo tiến trình.

#### 4. `-f` liệt kê chi tiết tiến trình 

```
ps -ef
```

#### 5. `ps -x` hiển thị các ps của người dùng 

- hiển thị ps của người dùng hiện tại

  ```
  ps -x
  ```

- hiển thị tiến trình của người dùng cụ thể 

```
ps -fU <tên user>
```



#### 6. `-fG` liệt kê các tiến trình dựa trên nhóm

để liệt kê ps của nhóm cụ  thể 

```
ps -fG <tên nhóm>
```

#### 7. `-o` Tạo định dạng đầu ra tuy chỉnh

```
$ ps -eo pid,ppid,user,cmd
```

tại sao lại là `ps -eo` ?

tùy chọn `-e` ở đây để liệt kê ra tất cả các ps

#### 8. giám sát ps theo thời gian thực 

dùng watch để lệnh ps được cập nhật liên tục:

```
$ watch -n 1 'ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem | head'
```

#### 9. Kiểm tra tiến trình có mức tiêu thụ tài nguyên cao nhất 

```
$ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu | head
```

#### 10. hiển thị thông tin bảo mật 

xem bối cảnh bảo mật của tiến trình (dành cho [SElinux](https://bizflycloud.vn/tin-tuc/selinux-la-gi-tai-sao-ban-nen-su-dung-selinux-20181011164512648.htm))

```
$ ps -eM
```

#### 11. Các lệnh kêt hợp khác 

```
$ ps -eo comm,etime,user | grep <tên_tiến_trình>
```

